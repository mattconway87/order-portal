<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 Trinity - Order Portal</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            color: #242429;
            padding-bottom: 180px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: #252f42;
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .header .account-name {
            font-size: 16px;
            color: #be835c;
            font-weight: 500;
        }

        /* Delivery Section */
        .delivery-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .delivery-section h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #252f42;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #242429;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 15px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #be835c;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* Product Catalog */
        .catalog-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .catalog-section h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #252f42;
            font-weight: 600;
        }

        .brand-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .brand-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .brand-tab.active {
            color: #252f42;
            border-bottom-color: #be835c;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .product-card {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
            background: white;
        }

        .product-card:hover {
            border-color: #be835c;
            box-shadow: 0 4px 12px rgba(190, 131, 92, 0.15);
        }

        .product-card.selected {
            border-color: #be835c;
            background: #fef9f5;
        }

        .product-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #252f42 0%, #be835c 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 28px;
        }

        .product-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #252f42;
            text-align: center;
        }

        .product-details {
            font-size: 13px;
            color: #666;
            margin-bottom: 12px;
            text-align: center;
        }

        .product-price {
            font-size: 18px;
            font-weight: 600;
            color: #be835c;
            text-align: center;
            margin-bottom: 15px;
        }

        .quantity-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .quantity-input button {
            width: 36px;
            height: 36px;
            border: 2px solid #be835c;
            background: white;
            color: #be835c;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .quantity-input button:hover {
            background: #be835c;
            color: white;
        }

        .quantity-input input {
            flex: 1;
            text-align: center;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
        }

        /* Cart Summary */
        .cart-summary {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .cart-summary h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #252f42;
            font-weight: 600;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-name {
            font-weight: 500;
            color: #242429;
        }

        .cart-item-qty {
            color: #be835c;
            font-weight: 600;
        }

        .cart-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
            font-size: 18px;
            font-weight: 600;
            color: #252f42;
            display: flex;
            justify-content: space-between;
        }

        .empty-cart {
            text-align: center;
            color: #999;
            padding: 30px;
            font-size: 15px;
        }

        /* Submit Button */
        .submit-section {
            text-align: center;
            margin-top: 30px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #252f42 0%, #be835c 100%);
            color: white;
            border: none;
            padding: 16px 60px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(37, 47, 66, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(37, 47, 66, 0.4);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .success-message {
            background: #4caf50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
        }

        .error-message {
            background: #f44336;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .brand-tabs {
                flex-direction: column;
            }

            .brand-tab {
                width: 100%;
                text-align: left;
            }
        }

        /* CART TOTAL FOOTER */
        .cart-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #252f42;
            border-top: 3px solid #be835c;
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .cart-footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .cart-stats {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .cart-stat {
            text-align: center;
        }

        .cart-stat-label {
            font-size: 12px;
            color: #be835c;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .cart-stat-value {
            font-size: 24px;
            color: white;
            font-weight: 600;
        }

        .cart-total {
            background: rgba(190, 131, 92, 0.2);
            padding: 10px 30px;
            border-radius: 8px;
            border: 2px solid #be835c;
        }

        .cart-total .cart-stat-value {
            font-size: 28px;
            color: #be835c;
        }

        @media (max-width: 768px) {
            .cart-footer-content {
                flex-direction: column;
                text-align: center;
            }

            .cart-stats {
                flex-direction: column;
                gap: 15px;
                width: 100%;
            }
        }
    

        /* ADMIN MODE STYLES */
        .admin-mode {
            background: linear-gradient(135deg, #be835c 0%, #d4a574 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #252f42;
            margin-bottom: 0;
        }

        .admin-mode h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 18px;
            letter-spacing: 2px;
        }

        .account-selector {
            max-width: 600px;
            margin: 0 auto;
        }

        .account-selector select {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #252f42;
            border-radius: 8px;
            background: white;
            color: #242429;
            font-weight: 600;
        }

        .account-selector select:focus {
            outline: none;
            border-color: #252f42;
            box-shadow: 0 0 10px rgba(190, 131, 92, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ACCOUNT NAMES - 249 total
        const ACCOUNT_NAMES = {
            "ADMIN001": "ADMIN - Matt Conway",
            "5772KDCM": "Roy Thomson Hall",
            "TFM6CE7C": "Nobu",
            "844YRPRC": "Pearson Duty Free",
            "CTSLRV4P": "Massey Hall",
            "QQFX5RA7": "Spirit of York Distillery",
            "UW7RZNV4": "Death and Taxes",
            "R5QUJEUH": "Drom Taberna",
            "APKB7U8N": "Bar Banane",
            "GC3Z5V3R": "Grange of Prince Edward",
            "ZEYYG74V": "The Royal Hotel",
            "8DQ6KBL5": "Parsons Brewing Company",
            "C3AD3EZM": "Liberty Soho",
            "WKACJP7C": "The Avling Kitchen and Brewery",
            "FN4WVL3L": "Petros82 (Adelaide)",
            "BYNFTYZC": "Ojibiway Club",
            "M4PKK3WH": "Kasa Moto",
            "U7JF8Q8V": "Greta YYZ",
            "3WYJ9PEE": "Fairmont Royal York Hotel",
            "YH54D9LA": "CN Tower",
            "NQ7C553C": "Bar Poet",
            "5VTDAACG": "Jacobs & Co. Steakhouse",
            "5AW6RUZ2": "Apt 200",
            "5LMGB6ZD": "Empire Sandy",
            "C2HJFYDV": "Fawn Over Market",
            "BY9FJNL9": "Crossroads Restaurant",
            "ZU8DWG7S": "David Duncan House",
            "NRNT3G3W": "Alice Restaurant & Bar",
            "FMPH8AXB": "Hamptons Restaurant",
            "CFJDKFG2": "Ritz Carlton",
            "JW6JYHNG": "Ganaraska Brewing Co.",
            "BL8ELU93": "Local Public Eatery (Adelaide)",
            "ZNH52R5H": "Ruby Soho",
            "NPVEX9LB": "Boxcar Social Summerhill",
            "3WLM3FS3": "Luxe Appliance Studio",
            "LSMYDXX6": "915 DuPont Cafe",
            "WKYW93MR": "Stone Crock Inc.",
            "XT7QA8ZY": "Barber & Co.",
            "MX9HTXP6": "La Condesa",
            "P9M675KA": "Louf",
            "SKVTNGKP": "Vinny",
            "BLGX9CZ7": "FIRST Insurance Funding of Canada",
            "SG36QFNJ": "RSM",
            "N8P7S3WN": "Linny's Restaurant",
            "SQ2FLLFH": "Beau Bistro",
            "GQ32RHFG": "Contrada",
            "JJBZAAZ2": "The Fredrick",
            "ELST5DK8": "Bar Piquette",
            "7PVKRHDK": "Trillium Woods Golf Course",
            "FRU6VD6W": "Hendersons Brewing",
            "P4Y9VX3K": "Local Public Eatery (Liberty)",
            "2YM3FVV6": "Aera",
            "ZQTHS7VQ": "Decanter (The Cellar Source)",
            "S2ET7QBQ": "Mira Mira Diner",
            "VU8N9JNW": "Westin Harbour Castle",
            "4TVVHA2M": "Portland Square",
            "5ZJVEJ4V": "Melrose / Piccolo Caffe e Vino",
            "7FTWKS5S": "Queenston Lewiston",
            "JAYWXCU6": "Sand and Pearl Oyster Bar",
            "4A5873T2": "Coffee Oysters Champagne | A Toi",
            "5P6RBBSM": "Claramount Club",
            "PGZYDN8W": "Kingston Waterfront Hotel (Aqua Terra)",
            "6L9DU56E": "Arden Park Hotel",
            "63VP82A5": "Ember",
            "3E5D358V": "Hy's Steakhouse",
            "HJ3P9JKQ": "Mount Alverno",
            "WQLRAUAQ": "Juna Restaurant",
            "XEB59A52": "Don Valley Golf Course",
            "UVPAYY9A": "Merrill House",
            "NAAL4TKC": "Black Bear Ridge Golf Course",
            "TRYSLCKP": "(Untitled) by Flaunt Boutique",
            "99HQ3KCN": "Hawker",
            "B23MHGKP": "Humber Valley Golf Course",
            "QSK6K7FT": "The Rosebud",
            "GJJH57ZT": "Expedition Helicopters",
            "A2AXBGNP": "Bloomfield Public House",
            "BJV23SDZ": "Red House Downtown",
            "EFNE8ML6": "Vic Social",
            "VEV56CQ8": "Lucie",
            "W34SWXZF": "aKin",
            "S5QRLQKS": "Table Rock House Restaurant",
            "DX8KTWAV": "The Yardbird",
            "7WACALXF": "Mother Cocktail Bar",
            "YNPDSMBT": "Florin",
            "ANAVKQFL": "The Wine Sisters",
            "X79QTBHH": "555 Brewing Co.",
            "YWWXNAEY": "Harbour Sixty Steakhouse",
            "B9BGQ4AM": "Elora Mill Hotel & Spa",
            "SC3EUHYR": "Saint John's Tavern",
            "3ELKA2ZU": "Bar Mordecai",
            "6ARQ7VX5": "Petros82 (Don Mills)",
            "3BMS5273": "Beamish House",
            "DGVG6Z6R": "East India Company",
            "JG5EDRBE": "MNP",
            "AF3YMWZX": "Mother Tongue / Liquid Courage",
            "HXAVZXLU": "No Vacancy",
            "H442Y6DH": "The Everly Restaurant & Lounge",
            "SVJDBBS9": "Base 31",
            "DHE5DJ9A": "Jackson Falls Country Inn",
            "ZXYB6RZ6": "Ace Golf Bar & Lounge",
            "535XRNY6": "Little Beasts Brewing",
            "8VK2Y7ZD": "Wander The Resort",
            "N3PWZR8S": "Miku",
            "M96CBPVN": "Chronicle Brewing Taproom Ltd.",
            "EH3PJQ97": "Hammerhead's Seafood Restaurant",
            "455CDQH8": "Brch & Wyn",
            "6UQBJK6F": "Hartley's Tavern",
            "6HWKF2NC": "Eastbound Brewing Co.",
            "GCXB7HZR": "The Knoll",
            "WEKFG4PY": "The Springwood",
            "3X2W6K45": "Drake Devonshire",
            "8VTLE5R5": "The Haifa Room",
            "3PLJPAWG": "Dina's Tavern",
            "7SVYTKJ4": "Eem Khao",
            "AV86WW8P": "Bar Charlotte",
            "FZ4UTSB9": "Belle Isle",
            "5ETF8ZYJ": "Bean Counter Cafe",
            "DBP6LAQJ": "Le Swan",
            "J235QQXN": "Barton Salumeria",
            "JTSMAXJW": "Wander The Resort",
            "Y9F7H77M": "Sunny's Chinese",
            "WRD237R7": "Shinka Sushi Bar",
            "MBWBRFMJ": "Mrs. Robinson",
            "MTQQEJ2Q": "True North Airways",
            "YDN3JG55": "Beach Hill Wines",
            "6455GDYW": "Mati",
            "BY87T8JS": "Six Thirty Nine",
            "K6NMMG3X": "Waterworks Food Hall",
            "B742KJHS": "Sofia Yorkville",
            "5J37FUW8": "Angeline's Inn",
            "E92N5CTE": "Animl Steakhouse",
            "XZN3LSP2": "Scotiabank Arena",
            "89C9QNP2": "Central Ossington",
            "FPTMM3B3": "Aiana Restaurant",
            "TC8H68M2": "Black Dog Tavern / Atomica",
            "W7HM2GHG": "Elmhirst's Resort",
            "CXME5EPH": "Mayla Concept / Le Jardin",
            "Q9PYBSL9": "Queen & Beaver Public House",
            "FZB4SE6N": "Rhubarb Restaurant",
            "FDQA3PLT": "Atomica",
            "DEN6NLNT": "Rhapsody",
            "NVLUA65N": "Takja BBQ House",
            "56WHMDYA": "Room 797",
            "MLC6VYWR": "Dreamland Cafe Inc.",
            "TT6RAM4X": "White Lily Diner",
            "NSJ4FRTX": "Chez Piggy",
            "UKNUE59Z": "Haliburton Post House",
            "CYBJQ6MF": "Gloria in the Great Hall",
            "NY63KWCQ": "Local Public Eatery (Leaside)",
            "S523VRZA": "Bampot House",
            "ZT7Y93A4": "Drake Hotel",
            "P3J95R8R": "Brass Monkey Speakeasy",
            "UC9LFC8V": "The Libertine",
            "VJYC4NNL": "Konrad Private Event",
            "9M2X43S3": "Granite Club",
            "WV5JK7RF": "Stratos Pizza",
            "MXK92ZDV": "Mildred's Temple Kitchen",
            "6TRH26SN": "The Argyle Golf Bar Inc.",
            "CJC8ZXWJ": "Marilynne Food Co. Ltd",
            "C9CR3D93": "Vagabondo Restobar",
            "MD624ESA": "The Local Social House",
            "YCBD82TB": "Under The Vine",
            "QYMBFSVB": "La Banane",
            "BDYPHKWJ": "Antler",
            "N6E2DZ2H": "St. Regis Hotel",
            "ZP3LUJLY": "Gia",
            "3HZS2KHN": "Track & Field Bar",
            "N6HR8WYU": "Prodigy Hospitality Group",
            "M88W228G": "Cherry's High Dive",
            "7A3WHFCT": "Corbin Catering & Foods",
            "Y9UW7Z8F": "Carbonic Coffee",
            "T6BVGKEZ": "Queen Victoria Place",
            "U62X7MH9": "J's Steakfrites",
            "JDBYMJJU": "Stackt Market",
            "QZ423ZC5": "Bar Aperitivo",
            "NH5GZD3R": "Eighteen",
            "L2UXYD3C": "Pan Pacific Hotel",
            "AZHPKZGR": "Blu Ristorante and Lounge",
            "RSTQK8R8": "Canada's National Ballet School",
            "6QVW7UZN": "Pukka",
            "RFDS9XB6": "Odd Duck Wine & Provisions",
            "FGLL3G62": "The Comrade",
            "2TX3LXHJ": "The Davenport",
            "YWRHWVEL": "Shirley's Bayside Grill",
            "LKK56JUY": "Bar Duchess",
            "VWXWMCGP": "Magnone's Italian Kitchen",
            "A8QC6VPL": "Noir Restaurant",
            "96U6SVRB": "Anice Jewlery",
            "9DHB3DSX": "Alo Restaurant & Bar",
            "5DHUWQXJ": "Perch Restaurant",
            "28F7LZNN": "Dianne's Fish Shack",
            "964BYULE": "Andaz Ottawa Byward Market (Hyatt)",
            "LZT6A6QV": "Cherry St Bar-B-Que",
            "YUKXF4HA": "Low Down Bar",
            "V5D732QQ": "Architect Hair Design",
            "QUHZYMEY": "Arlo Wine & Restaurant",
            "M28N5CTF": "Laughing Buddha",
            "F96TUJH5": "TasteEx",
            "FDWYJ2NM": "Rapscallion & Co.",
            "U5J267CZ": "County Arts Council Holiday Mixer",
            "XGDRGZAT": "Bar Danu",
            "WCQ3WJQG": "Casa Paco",
            "DQJS44CY": "Lisbon Hotel",
            "LZUNKM4J": "Split Tree",
            "5D2BQ3XR": "Chez Nous Wine Bar",
            "7UJY8KSM": "Thr33s Company",
            "9JRZBTWS": "10 Dean",
            "TK2MG2SN": "Baton Rouge (Hunt Club)",
            "4YW7WFL7": "Nomi Resort",
            "HKP5M2TA": "Sussex & Co",
            "Q8AE8UZS": "The Clarendon",
            "VM7K7XF3": "Minami",
            "BEZN25BN": "Everyside",
            "9U4WXY7W": "Elizabeth Hospitality",
            "DTUXJR29": "Brigadoon Restaurant",
            "2ASGWWVX": "Fauna",
            "VCGYMDCF": "King Street Trio Uptown",
            "BDJFP2D4": "Le Poisson Bleu",
            "V63YGLTL": "Occhiolino Pastificio",
            "3GDUNBFS": "Tuckers Market Place",
            "X4NN29RT": "Another Bar",
            "F32L64Y5": "Gladstone Commons",
            "6QHFL2E8": "Mandy's Bistro (The Epochal Imp)",
            "HSE9226F": "Poppy's French Bistro",
            "KPKUCUVW": "The Ace",
            "PE8X8PTX": "Karma",
            "Q2HT4VNR": "Let Me Be Frank and Frankly",
            "WTBGQP4N": "Made In Canada Eatery & Whisky Pub",
            "XUDMPMBW": "The Muskoka Eye",
            "MJRWMY67": "The Rhino Bar & Grill",
            "EPTXVWQ3": "Archives Wine & Spirit Merchants",
            "AGWZU62M": "Bluewater",
            "Q9GZZWK6": "Meyers Creek Brewing Company",
            "BEN76PC6": "Paris Texas",
            "Q6EGAFC3": "Pure Spirits",
            "AZFBWPD3": "Simpl Things",
            "HG6TT7XV": "The 222",
            "3YBBY8SD": "History",
            "1B2VHWPH": "Budweiser Stage",
            "NBYUKKMV": "Electric Island",
            "4GALK4CC": "Danforth Music Hall",
            "0PHR4APK": "Revival Event Venue",
            "4GRBZBC4": "Mod Club",
            "RFMRTZ9J": "Opera House",
            "VLY88JJW": "Kee To Bala",
            "0IB5SNPS": "Escapade",
            "4O4TUYR5": "Lakehouse",
            "9K0KUXPA": "Boiler Room",
            "LAX2DYA3": "Veld"
        };

        // PRODUCTS - 38 total with restrictions
        const PRODUCTS = {
            'Spirit of York': [
                { id: 'soy-vodka', name: 'Vodka', size: '750mL', abv: '40%', price: 36.08, lcbo: '541755', icon: 'ü•É', image: './images/soy-vodka.png' },
                { id: 'soy-gin', name: 'Gin', size: '750mL', abv: '40%', price: 36.08, lcbo: '536805', icon: 'üç∏', image: './images/soy-gin.png' },
                { id: 'soy-aquavit', name: 'Aquavit', size: '750mL', abv: '44%', price: 39.63, lcbo: '645846', icon: 'ü•Ç', image: './images/soy-aquavit.png' },
                { id: 'soy-coffee', name: 'Coffee Liqueur', size: '375mL', abv: '25%', price: 23.70, lcbo: '', icon: '‚òï', image: './images/soy-coffee.png' },
                { id: 'soy-whisky', name: 'Whisky', size: '750mL', abv: '40%', price: 57.30, lcbo: '', icon: 'ü•É', image: './images/soy-whisky.png', allowedAccounts: ['ADMIN001'] },
                { id: 'soy-aperitivo', name: 'Aperitivo', size: '750mL', abv: '20%', price: 23.70, lcbo: '', icon: 'üçπ', image: './images/soy-aperitivo.png', allowedAccounts: ['ADMIN001'] },
                { id: 'soy-citruscello', name: 'Citruscello', size: '750mL', abv: '20%', price: 23.70, lcbo: '', icon: 'üçã', image: './images/soy-citruscello.png', allowedAccounts: ['ADMIN001'] }
            ],
            'DISTL': [
                { id: 'distl-vodka', name: 'DISTL Vodka', size: '750mL', abv: '40%', price: 27.68, lcbo: '', icon: 'ü•É', image: './images/distl-vodka.png' },
                { id: 'distl-gin', name: 'DISTL Gin', size: '750mL', abv: '40%', price: 31.66, lcbo: '34588', icon: 'üç∏', image: './images/distl-gin.png' },
                { id: 'distl-whisky', name: 'DISTL Canadian Whisky', size: '750mL', abv: '40%', price: 29.63, lcbo: '46049', icon: 'ü•É', image: './images/distl-whisky.png' },
                { id: 'distl-pink', name: 'DISTL Pink Gin', size: '750mL', abv: '35%', price: 31.66, lcbo: '', icon: 'üíó', image: './images/distl-pink.png' },
                { id: 'distl-chili', name: 'DISTL Ancho Chili', size: '750mL', abv: '40%', price: 31.66, lcbo: '', icon: 'üå∂Ô∏è', image: './images/distl-chili.png' },
                { id: 'distl-peach', name: 'RTD Peach Blueberry', size: '355mL', abv: '5%', price: 2.31, lcbo: '', icon: 'üçë', image: './images/distl-peach.png' },
                { id: 'distl-rasp', name: 'RTD Raspberry Lemon', size: '355mL', abv: '5%', price: 2.31, lcbo: '', icon: 'üçã', image: './images/distl-rasp.png' },
                { id: 'distl-sweet-tea', name: 'DISTL Sweet Tea Liqueur', size: '750mL', abv: '20%', price: 31.66, lcbo: '', icon: 'üçµ', image: './images/distl-sweet-tea.png', allowedAccounts: ['ADMIN001'] },
                { id: 'distl-orange-liq', name: 'DISTL Orange Liqueur', size: '750mL', abv: '20%', price: 31.66, lcbo: '', icon: 'üçä', image: './images/distl-orange-liq.png', allowedAccounts: ['ADMIN001'] },
                { id: 'distl-signature-gin', name: 'DISTL Signature Gin', size: '750mL', abv: '40%', price: 28.14, lcbo: '', icon: 'üç∏', image: './images/distl-signature-gin.png', allowedAccounts: ['3YBBY8SD', '1B2VHWPH', 'NBYUKKMV', '4GALK4CC', '0PHR4APK', '4GRBZBC4', 'RFMRTZ9J', 'VLY88JJW', '0IB5SNPS', '4O4TUYR5', '9K0KUXPA', 'LAX2DYA3'] },
                { id: 'distl-orange-vodka', name: 'DISTL Orange Vodka', size: '750mL', abv: '40%', price: 30.75, lcbo: '', icon: 'üçä', image: './images/distl-orange-vodka.png', allowedAccounts: ['ZNH52R5H', 'C3AD3EZM'] },
                { id: 'distl-cherry-vodka', name: 'DISTL Cherry Vodka', size: '750mL', abv: '40%', price: 20.13, lcbo: '', icon: 'üçí', image: './images/distl-cherry-vodka.png', allowedAccounts: ['ZNH52R5H', 'C3AD3EZM'] },
                { id: 'distl-sour-poet', name: 'DISTL Sour Poet', size: '750mL', abv: '20%', price: 19.25, lcbo: '', icon: 'üçã', image: './images/distl-sour-poet.png', allowedAccounts: ['NQ7C553C'] }
            ],
            'The Grange': [
                { id: 'grange-laf', name: 'Lafontaine du Loup Brut', size: '750mL', abv: '12%', price: 52.20, lcbo: '', icon: 'üçæ', image: './images/grange-laf.png' },
                { id: 'grange-aur-cf', name: '2023 Aurelia Cabernet Franc', size: '750mL', abv: '13%', price: 58.50, lcbo: '', icon: 'üç∑', image: './images/grange-aur-cf.png' },
                { id: 'grange-aur-pn', name: '2023 Aurelia Pinot Noir', size: '750mL', abv: '12%', price: 58.50, lcbo: '', icon: 'üç∑', image: './images/grange-aur-pn.png' },
                { id: 'grange-aur-ch', name: '2023 Aurelia Chardonnay', size: '750mL', abv: '14.3%', price: 58.50, lcbo: '', icon: 'ü•Ç', image: './images/grange-aur-ch.png' },
                { id: 'grange-est-cf', name: '2024 Estate Cabernet Franc', size: '750mL', abv: '13.5%', price: 28.80, lcbo: '', icon: 'üç∑', image: './images/grange-est-cf.png' },
                { id: 'grange-est-pn', name: '2024 Estate Pinot Noir', size: '750mL', abv: '12.7%', price: 28.80, lcbo: '', icon: 'üç∑', image: './images/grange-est-pn.png' },
                { id: 'grange-est-ch', name: '2024 Estate Chardonnay', size: '750mL', abv: '13%', price: 25.50, lcbo: '', icon: 'ü•Ç', image: './images/grange-est-ch.png' },
                { id: 'grange-alm-white', name: '2024 Almanac White', size: '750mL', abv: '11%', price: 12.55, lcbo: '', icon: 'ü•Ç', image: './images/grange-alm-white.png' }
            ],
            'Cases': [
                { id: 'case-soy-vodka', name: 'Spirit of York Vodka Case', size: '12x750mL', abv: '40%', price: 64.00, lcbo: '', icon: 'üì¶', image: './images/case-soy-vodka.png', allowedAccounts: ['844YRPRC', '7FTWKS5S'] },
                { id: 'case-soy-gin', name: 'Spirit of York Gin Case', size: '12x750mL', abv: '40%', price: 80.00, lcbo: '', icon: 'üì¶', image: './images/case-soy-gin.png', allowedAccounts: ['844YRPRC', '7FTWKS5S'] },
                { id: 'case-soy-whisky', name: 'Spirit of York Whisky Case', size: '12x750mL', abv: '40%', price: 93.33, lcbo: '', icon: 'üì¶', image: './images/case-soy-whisky.png', allowedAccounts: ['844YRPRC', '7FTWKS5S'] },
                { id: 'case-distl-pink', name: 'DISTL Pink Gin Case (12)', size: '12x750mL', abv: '35%', price: 117.34, lcbo: '', icon: 'üì¶', image: './images/case-distl-pink.png', allowedAccounts: ['844YRPRC', '7FTWKS5S'] },
                { id: 'case-distl-gin', name: 'DISTL Gin Case', size: '12x750mL', abv: '40%', price: 138.67, lcbo: '', icon: 'üì¶', image: './images/case-distl-gin.png', allowedAccounts: ['844YRPRC', '7FTWKS5S'] }
            ]
        };

        function OrderPortal() {
            const [accountCode, setAccountCode] = useState('');
            const [accountName, setAccountName] = useState('');
            const [selectedAccountForAdmin, setSelectedAccountForAdmin] = useState('');
            const [deliveryDate, setDeliveryDate] = useState('');
            const [selectedBrand, setSelectedBrand] = useState('Spirit of York');
            const [cart, setCart] = useState({});
            const [submitting, setSubmitting] = useState(false);
            const [message, setMessage] = useState({ type: '', text: '' });
            const [isAdmin, setIsAdmin] = useState(false);

            // Get account code from URL
            useEffect(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const code = urlParams.get('account');
                if (code) {
                    setAccountCode(code);
                    if (code === 'ADMIN001') {
                        setIsAdmin(true);
                        setAccountName('ADMIN - Matt Conway');
                    } else {
                        const realName = ACCOUNT_NAMES[code];
                        setAccountName(realName || `Account ${code}`);
                    }
                } else {
                    setAccountName('Guest Account');
                }
            }, []);

            // When admin selects an account
            useEffect(() => {
                if (isAdmin && selectedAccountForAdmin) {
                    setAccountName(ACCOUNT_NAMES[selectedAccountForAdmin]);
                }
            }, [isAdmin, selectedAccountForAdmin]);

            // Filter products based on account permissions
            const getVisibleProducts = (brand) => {
                const brandProducts = PRODUCTS[brand] || [];
                const activeAccount = isAdmin && selectedAccountForAdmin ? selectedAccountForAdmin : accountCode;
                
                return brandProducts.filter(product => {
                    // If no restrictions, show to everyone
                    if (!product.allowedAccounts) return true;
                    
                    // If product is admin-only (only ADMIN001 in allowedAccounts), show when in admin mode
                    if (product.allowedAccounts.length === 1 && product.allowedAccounts[0] === 'ADMIN001') {
                        return isAdmin;
                    }
                    
                    // Otherwise check if active account is in allowed list (applies even to admin)
                    return product.allowedAccounts.includes(activeAccount);
                });
            };

            // Calculate cart totals
            const getCartTotals = () => {
                let totalItems = 0;
                let totalBottles = 0;
                let totalPrice = 0;

                Object.keys(cart).forEach(productId => {
                    const qty = cart[productId];
                    if (qty > 0) {
                        totalItems++;
                        totalBottles += qty;
                        
                        // Find product price
                        for (const brand in PRODUCTS) {
                            const product = PRODUCTS[brand].find(p => p.id === productId);
                            if (product) {
                                totalPrice += product.price * qty;
                                break;
                            }
                        }
                    }
                });

                return { totalItems, totalBottles, totalPrice };
            };

            const { totalItems, totalBottles, totalPrice } = getCartTotals();

            // Get next available delivery dates (Mon/Wed/Fri only)
            const getDeliveryDates = () => {
                const dates = [];
                const today = new Date();
                let checkDate = new Date(today);
                checkDate.setDate(checkDate.getDate() + 1);

                while (dates.length < 10) {
                    const dayOfWeek = checkDate.getDay();
                    if (dayOfWeek === 1 || dayOfWeek === 3 || dayOfWeek === 5) {
                        dates.push(new Date(checkDate));
                    }
                    checkDate.setDate(checkDate.getDate() + 1);
                }
                return dates;
            };

            const updateQuantity = (productId, delta) => {
                setCart(prev => {
                    const currentQty = prev[productId] || 0;
                    const newQty = Math.max(0, currentQty + delta);
                    
                    if (newQty === 0) {
                        const newCart = { ...prev };
                        delete newCart[productId];
                        return newCart;
                    }
                    
                    return { ...prev, [productId]: newQty };
                });
            };

            const setQuantity = (productId, value) => {
                const qty = parseInt(value) || 0;
                if (qty === 0) {
                    setCart(prev => {
                        const newCart = { ...prev };
                        delete newCart[productId];
                        return newCart;
                    });
                } else {
                    setCart(prev => ({ ...prev, [productId]: qty }));
                }
            };

            const getTotalBottles = () => {
                return Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            };

            const getCartItems = () => {
                const items = [];
                Object.keys(cart).forEach(productId => {
                    const qty = cart[productId];
                    if (qty > 0) {
                        for (const brand in PRODUCTS) {
                            const product = PRODUCTS[brand].find(p => p.id === productId);
                            if (product) {
                                items.push({ ...product, brand, qty });
                                break;
                            }
                        }
                    }
                });
                return items;
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (getTotalBottles() === 0) {
                    setMessage({ type: 'error', text: 'Please select at least one product' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    return;
                }

                if (!deliveryDate) {
                    setMessage({ type: 'error', text: 'Please select a delivery date' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    return;
                }

                // If admin, require account selection
                if (isAdmin && !selectedAccountForAdmin) {
                    setMessage({ type: 'error', text: 'Please select an account to place order for' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    return;
                }

                setSubmitting(true);
                setMessage({ type: '', text: '' });

                try {
                    const orderDetails = getCartItems()
                        .map(item => `${item.qty}/${item.brand}/${item.name}`)
                        .join('\n');

                    const activeAccountName = isAdmin && selectedAccountForAdmin 
                        ? ACCOUNT_NAMES[selectedAccountForAdmin]
                        : accountName;
                    
                    const activeAccountCode = isAdmin && selectedAccountForAdmin
                        ? selectedAccountForAdmin
                        : accountCode;

                    const formData = {
                        accountName: activeAccountName,
                        accountCode: activeAccountCode,
                        deliveryDate,
                        orderDetails,
                        totalBottles: getTotalBottles()
                    };

                    // Debug logging
                    console.log('Submitting order:', formData);
                    console.log('Is Admin:', isAdmin);
                    console.log('Selected Account:', selectedAccountForAdmin);

                    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyIxrZul2bWgcgPY4vA5f8pbEaxo857Z9tcAiZs4he-cKjMsnQj2X0FX1TLaxNzRpjK/exec';
                    
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });

                    setMessage({ type: 'success', text: 'Order submitted successfully!' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    setCart({});
                    setDeliveryDate('');
                    
                } catch (error) {
                    console.error('Error:', error);
                    setMessage({ type: 'error', text: 'Failed to submit order. Please try again.' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } finally {
                    setSubmitting(false);
                }
            };

            return (
                <div className="container">
                    {/* ADMIN MODE HEADER */}
                    {isAdmin && (
                        <div className="admin-mode">
                            <h3>üîê ADMIN MODE - SELECT ACCOUNT</h3>
                            <div className="account-selector">
                                <select 
                                    value={selectedAccountForAdmin}
                                    onChange={(e) => setSelectedAccountForAdmin(e.target.value)}
                                >
                                    <option value="">-- Select Account to Place Order For --</option>
                                    {Object.entries(ACCOUNT_NAMES)
                                        .filter(([code]) => code !== 'ADMIN001')
                                        .sort((a, b) => a[1].localeCompare(b[1]))
                                        .map(([code, name]) => (
                                            <option key={code} value={code}>
                                                {name} ({code})
                                            </option>
                                        ))
                                    }
                                </select>
                            </div>
                        </div>
                    )}

                    <div className="header">
                        <h1>12 TRINITY</h1>
                        <div style={{fontSize: '14px', color: '#be835c', marginTop: '8px', letterSpacing: '2px'}}>
                            Spirit of York Distillery ‚Ä¢ The Grange of Prince Edward
                        </div>
                        <div className="account-name">
                            {isAdmin && selectedAccountForAdmin 
                                ? `Ordering for: ${ACCOUNT_NAMES[selectedAccountForAdmin]}`
                                : accountName
                            }
                        </div>
                    </div>

                    {message.text && (
                        <div className={message.type === 'success' ? 'success-message' : 'error-message'}>
                            {message.text}
                        </div>
                    )}

                    <form onSubmit={handleSubmit}>
                        <div className="delivery-section">
                            <h2>Delivery Information</h2>
                            
                            <div className="form-group">
                                <label>Delivery Date *</label>
                                <select 
                                    value={deliveryDate} 
                                    onChange={(e) => setDeliveryDate(e.target.value)}
                                    required
                                >
                                    <option value="">Select a delivery date...</option>
                                    {getDeliveryDates().map(date => {
                                        const dateStr = date.toISOString().split('T')[0];
                                        const displayDate = date.toLocaleDateString('en-US', { 
                                            weekday: 'long', 
                                            month: 'long', 
                                            day: 'numeric' 
                                        });
                                        return (
                                            <option key={dateStr} value={dateStr}>
                                                {displayDate}
                                            </option>
                                        );
                                    })}
                                </select>
                            </div>
                        </div>

                        <div className="products-section">
                            <h2>Select Products</h2>
                            
                            <div className="brand-tabs">
                                {Object.keys(PRODUCTS)
                                    .filter(brand => {
                                        // Show all brands except Cases
                                        if (brand !== 'Cases') return true;
                                        // Only show Cases for Pearson Duty Free or Queenston Lewiston
                                        const activeAccount = isAdmin && selectedAccountForAdmin ? selectedAccountForAdmin : accountCode;
                                        return activeAccount === '844YRPRC' || activeAccount === '7FTWKS5S';
                                    })
                                    .map(brand => (
                                    <button
                                        key={brand}
                                        type="button"
                                        className={`brand-tab ${selectedBrand === brand ? 'active' : ''}`}
                                        onClick={() => setSelectedBrand(brand)}
                                    >
                                        {brand}
                                    </button>
                                ))}
                            </div>

                            <div className="product-grid">
                                {getVisibleProducts(selectedBrand).map(product => (
                                    <div 
                                        key={product.id}
                                        className={`product-card ${cart[product.id] > 0 ? 'selected' : ''}`}
                                    >
                                        <div className="product-icon">
                                            {product.image ? (
                                                <img 
                                                    src={product.image} 
                                                    alt={product.name}
                                                    onError={(e) => { e.target.style.display = 'none'; e.target.nextSibling.style.display = 'block'; }}
                                                    style={{maxWidth: '100%', maxHeight: '200px', objectFit: 'contain'}}
                                                />
                                            ) : null}
                                            <span style={{display: product.image ? 'none' : 'block'}} >{product.icon}</span>
                                        </div>
                                        <div className="product-name">{product.name}</div>
                                        <div className="product-details">
                                            {product.size} | {product.abv}
                                            {product.lcbo && <><br/>LCBO #{product.lcbo}</>}
                                        </div>
                                        <div className="product-price">${product.price.toFixed(2)}</div>
                                        
                                        <div className="quantity-input">
                                            <button 
                                                type="button"
                                                onClick={() => updateQuantity(product.id, -1)}
                                            >
                                                -
                                            </button>
                                            <input 
                                                type="number"
                                                min="0"
                                                value={cart[product.id] || 0}
                                                onChange={(e) => setQuantity(product.id, e.target.value)}
                                            />
                                            <button 
                                                type="button"
                                                onClick={() => updateQuantity(product.id, 1)}
                                            >
                                                +
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="submit-section">
                            <button 
                                type="submit" 
                                className="submit-btn"
                                disabled={submitting || getTotalBottles() === 0}
                            >
                                {submitting ? 'Submitting Order...' : 'Submit Order'}
                            </button>
                        </div>
                    </form>

                    {/* CART TOTAL FOOTER */}
                    <div className="cart-footer">
                        <div className="cart-footer-content">
                            <div className="cart-stats">
                                <div className="cart-stat">
                                    <div className="cart-stat-label">Total Items</div>
                                    <div className="cart-stat-value">{totalItems}</div>
                                </div>
                                <div className="cart-stat">
                                    <div className="cart-stat-label">Total Bottles</div>
                                    <div className="cart-stat-value">{totalBottles}</div>
                                </div>
                            </div>
                            <div className="cart-total">
                                <div className="cart-stat">
                                    <div className="cart-stat-label">Cart Total</div>
                                    <div className="cart-stat-value">${totalPrice.toFixed(2)}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<OrderPortal />, document.getElementById('root'));
    </script>
</body>
</html>